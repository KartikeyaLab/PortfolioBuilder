<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Portfolio Builder | Kartikeya | Code. Design. Create.</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap"
      rel="stylesheet"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.0/jszip.min.js"></script>
    <script defer src="script.js"></script>

    <!-- Google tag (gtag.js) -->
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=G-WHK838LNKF"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());

      gtag("config", "G-WHK838LNKF");
    </script>

    <link
      href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css"
      rel="stylesheet"
    />

    <link
      rel="icon"
      type="image/png"
      sizes="16x16"
      href="Favicon/favicon-16x16.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="Favicon/favicon-32x32.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="96x96"
      href="Favicon/favicon-96x96.png"
    />
    <link rel="icon" href="Favicon/favicon.ico" />

    <link
      rel="icon"
      type="image/png"
      sizes="36x36"
      href="Favicon/android-icon-36x36.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="48x48"
      href="Favicon/android-icon-48x48.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="72x72"
      href="Favicon/android-icon-72x72.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="96x96"
      href="Favicon/android-icon-96x96.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="144x144"
      href="Favicon/android-icon-144x144.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="192x192"
      href="Favicon/android-icon-192x192.png"
    />

    <link
      rel="apple-touch-icon"
      sizes="57x57"
      href="Favicon/apple-icon-57x57.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="60x60"
      href="Favicon/apple-icon-60x60.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="72x72"
      href="Favicon/apple-icon-72x72.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="76x76"
      href="Favicon/apple-icon-76x76.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="114x114"
      href="Favicon/apple-icon-114x114.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="120x120"
      href="Favicon/apple-icon-120x120.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="144x144"
      href="Favicon/apple-icon-144x144.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="152x152"
      href="Favicon/apple-icon-152x152.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="Favicon/apple-icon-180x180.png"
    />
    <link rel="apple-touch-icon" href="Favicon/apple-icon-precomposed.png" />
    <link rel="apple-touch-icon" href="Favicon/apple-icon.png" />

    <meta name="msapplication-TileImage" content="Favicon/ms-icon-70x70.png" />
    <meta
      name="msapplication-TileImage"
      content="Favicon/ms-icon-144x144.png"
    />
    <meta
      name="msapplication-TileImage"
      content="Favicon/ms-icon-150x150.png"
    />
    <meta
      name="msapplication-TileImage"
      content="Favicon/ms-icon-310x310.png"
    />

    <link rel="stylesheet" href="style.css" />

    <script
      src="https://kit.fontawesome.com/542131e2b7.js"
      crossorigin="anonymous"
    ></script>

    <style>
      @import url("https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap");
      body {
        font-family: "Montserrat", sans-serif;
        background-color: #10121b;
      }

      #socialFields {
        margin-bottom: 10px;
      }

      #bgPalette {
        margin-top: 20px;
      }

      .browser-window {
        background-color: #fff;
        border-radius: 12px;
        box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12);
        width: clamp(320px, 90%, 900px);
        overflow: hidden;
      }

      .title-bar {
        background-color: #f5f5f5;
        padding: 12px 15px;
        display: flex;
        align-items: center;
        justify-content: flex-start;
        border-bottom: 1px solid #ddd;
        border-radius: 12px 12px 0 0;
      }

      .favicon {
        width: 20px;
        height: 20px;
        margin: 0 8px;
      }

      .title-buttons {
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .close-button,
      .minimize-button,
      .maximize-button {
        width: 12px;
        height: 12px;
        border-radius: 50%;
        flex-shrink: 0;
        cursor: pointer;
      }

      .close-button {
        background-color: #ff5e57;
        transition: background-color 0.3s ease, transform 0.2s ease;
      }

      .close-button:hover {
        background-color: #e04842;
        transform: scale(1.1);
      }

      .minimize-button {
        background-color: #ffb900;
        transition: background-color 0.3s ease, transform 0.2s ease;
      }

      .minimize-button:hover {
        background-color: #e0a700;
        transform: scale(1.1);
      }

      .maximize-button {
        background-color: #00c853;
        transition: background-color 0.3s ease, transform 0.2s ease;
      }

      .maximize-button:hover {
        background-color: #00a944;
        transform: scale(1.1);
      }

      .title-text {
        flex-grow: 1;
        text-align: center;
        font-size: 16px;
        font-weight: 600;
        display: flex;
        align-items: center;
        justify-content: center;
        color: #2c3e50;
        pointer-events: none;
      }
      .text_url {
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        display: flex;
        align-items: center;
      }

      .address-bar {
        background-color: #fff;
        padding: 10px 15px;
        display: flex;
        align-items: center;
        border-bottom: 1px solid #ddd;
      }

      .nav-buttons {
        display: flex;
        margin-right: 12px;
        color: #000;
      }

      .nav-button {
        background: none;
        border: none;
        padding: 6px;
        margin-right: 6px;
        cursor: pointer;
        opacity: 0.6;
        transition: opacity 0.2s ease, transform 0.2s ease;
      }

      .nav-button:hover {
        opacity: 1;
        transform: scale(1.1);
      }

      .input-wrapper {
        position: relative;
        flex-grow: 1;
        display: flex;
        align-items: center;
      }

      .secure-icon {
        position: absolute;
        left: 12px;
        top: 50%;
        transform: translateY(-50%);
        pointer-events: none;
        z-index: 1;
      }

      .url-input {
        width: 100%;
        padding: 10px 10px 10px 40px;
        border: 1px solid #ccc;
        border-radius: 50px;
        background-color: #f9f9f9;
        font-size: 0.95em;
        color: #222;
        transition: border 0.2s ease, box-shadow 0.2s ease;
      }

      .url-input:focus {
        outline: none;
        border-color: #4caf50;
        box-shadow: 0 0 0 2px rgba(76, 175, 80, 0.2);
      }

      .content-area {
        background-color: #fff;
        height: 80px;
        overflow: hidden;
        font-size: 1em;
        line-height: 1.6;
        color: #444;
      }

      #faviconPreview {
        display: none;
      }

      .flex.flex-wrap {
        display: flex;
        flex-wrap: wrap;
        gap: 12px;
        justify-content: flex-start;
      }

      .flex.flex-wrap > label {
        display: flex;
        align-items: center;
        gap: 12px;
        background-color: #1e1f2a;
        padding: 12px 16px;
        border-radius: 10px;
        cursor: pointer;
        transition: background-color 0.25s ease, transform 0.2s ease,
          box-shadow 0.3s ease;
        box-shadow: 0 0 0 1px #2c2f3a;
        flex: 1 1 160px;
      }

      .flex.flex-wrap > label:hover {
        background-color: #2a2c39;
        transform: scale(1.03);
        box-shadow: 0 0 0 2px #3f4a6b;
      }

      label.role-label {
        display: flex;
        align-items: center;
        gap: 10px;
        background-color: #2a2c3b;
        color: #ffffff;
        padding: 12px 14px;
        border-radius: 8px;
        cursor: pointer;
        transition: background-color 0.3s ease, transform 0.2s ease;
        flex-wrap: wrap;
      }
      label.role-label:hover {
        background-color: #343648;
        transform: scale(1.02);
      }

      .profession {
        appearance: none;
        -webkit-appearance: none;
        width: 20px;
        height: 20px;
        border: 2px solid #5c5f70;
        border-radius: 4px;
        background-color: #292a33;
        position: relative;
        cursor: pointer;
        transition: all 0.2s ease-in-out;
      }
      .profession:hover {
        border-color: #7d81a1;
      }
      .profession:checked {
        background-color: #4263a4;
        border-color: #4263a4;
      }
      .profession:checked::after {
        content: "";
        position: absolute;
        left: 5px;
        top: 2px;
        width: 6px;
        height: 12px;
        border: solid white;
        border-width: 0 2px 2px 0;
        transform: rotate(45deg);
      }

      .other-input {
        flex: 1;
        min-width: 200px;
        padding: 8px 12px;
        background-color: #1e1f2a;
        border: 1px solid #444;
        color: white;
        border-radius: 6px;
        font-size: 14px;
      }
      .other-input::placeholder {
        color: #999;
        font-style: italic;
      }

      .add-btn {
        padding: 8px 12px;
        color: white;
        border: none;
        border-radius: 6px;
        font-size: 14px;
        cursor: pointer;
        transition: background-color 0.2s ease;
      }

      .publish_image {
        border-radius: 15px;
        margin: 18px 0;
      }

      #fontPreview {
        transition: font 0.3s ease, color 0.3s ease, opacity 0.3s ease;
      }
    </style>
  </head>
  <body class="text-white">
    <div id="loading-circle" class="loading-circle">
      <div class="spinner"></div>
      <div id="loading-circle">
        <div class="spinner"></div>
        <div id="quote" class="quote-text"></div>
      </div>
    </div>

    <div class="container_universal_hidden">
      <nav>
        <div class="wrapper">
          <div class="logo">
            <a href="https://kartikeyalab.github.io/kartikeya/">Kartikeya</a>
          </div>

          <input type="radio" name="slider" id="menu-btn" />
          <input type="radio" name="slider" id="close-btn" />
          <ul class="nav-links">
            <label for="close-btn" class="btn close-btn">
              <i class="fas fa-times"></i>
            </label>
            <li><a href="#" class="nav-link">Home</a></li>
            <li>
              <a href="https://github.com/KartikeyaLab" target="_blank"
                >Github</a
              >
            </li>
            <li>
              <a href="https://www.youtube.com/@clever-ways" target="_blank"
                >Youtube</a
              >
            </li>
            <li>
              <a href="https://monkeytype.com/profile/Karitkeya" target="_blank"
                >Monkeytype</a
              >
            </li>

            <li class="search_botton">
              <a href="#message_for_you">
                <i class="fa-solid fa-heart"></i>
              </a>
            </li>
          </ul>

          <label for="menu-btn" class="btn menu-btn">
            <i class="fas fa-bars"></i>
          </label>
        </div>
      </nav>

      <section
        class="flex-grow flex flex-col justify-center items-center text-center px-6 header"
      >
        <h2 class="text-6xl md:text-8xl font-bold mb-2 leading-none">
          Portfolio Builder
        </h2>
        <p class="text-zinc-400 text-base md:text-lg">
          Create · Showcase · Inspire
        </p>
        <p class="text-zinc-400 text-base md:text-lg mb-5">
          Craft your portfolio in moments, masterfully.
        </p>

        <div
          class="flex flex-wrap justify-center items-center gap-4 md:gap-6 p-4"
        >
          <a
            href="#getstarted"
            title="Build Your Portfolio"
            class="group relative inline-flex items-center justify-center px-8 py-3 rounded-xl bg-white/10 border border-white/30 backdrop-blur-lg shadow-lg transition-all duration-300 hover:scale-105 hover:border-white/40 hover:shadow-2xl"
          >
            <span
              class="absolute inset-0 rounded-xl bg-gradient-to-r from-transparent to-white/20 opacity-0 group-hover:opacity-10 transition-opacity duration-300"
            ></span>
            <span
              class="relative z-10 text-base font-medium text-white group-hover:text-white/90 transition-colors duration-300"
            >
              Get Started
            </span>
          </a>
        </div>
        <div class="transparent_overlay"></div>
      </section>

      <section id="getstarted" class="px-6 py-24 max-w-6xl mx-auto">
        <h3
          class="text-4xl sm:text-5xl md:text-6xl lg:text-7xl font-bold text-center mb-2 sm:mb-4"
        >
          Make It Happen!
        </h3>
        <p class="dim_text text-center mb-10 text-sm sm:text-base">
          Transform your ideas into reality, instantly.
        </p>

        <form id="siteForm">
          <label for="first_name" class="block text-sm mb-1 text-zinc-400"
            >First Name</label
          >
          <input
            type="text"
            id="first_name"
            placeholder="What do your friends call you?"
            class="w-full px-4 py-3 dark_background rounded-lg border border-zinc-700 text-white placeholder:text-zinc-400 placeholder:text-sm placeholder:italic focus:ring-2 focus:ring-blue-500 focus:outline-none"
            required
          />

          <label
            for="last_name"
            class="block text-sm mb-1 text-zinc-400 mt-4 md:mt-6"
            >Last Name</label
          >
          <input
            type="text"
            id="last_name"
            placeholder="Your legacy name goes here (Optional)"
            class="w-full px-4 py-3 dark_background rounded-lg border border-zinc-700 text-white placeholder:text-zinc-400 placeholder:text-sm placeholder:italic focus:ring-2 focus:ring-blue-500 focus:outline-none"
          />

          <label
            for="email"
            class="block text-sm mb-1 text-zinc-400 mt-4 md:mt-6"
            >Email</label
          >
          <input
            type="email"
            id="email"
            placeholder="Where can the world reach you?"
            class="w-full px-4 py-3 dark_background rounded-lg border border-zinc-700 text-white placeholder:text-zinc-400 placeholder:text-sm placeholder:italic focus:ring-2 focus:ring-blue-500 focus:outline-none"
            required
          />

          <label
            for="tagline"
            class="block text-sm mb-1 text-zinc-400 mt-4 md:mt-6"
            >Tagline</label
          >
          <input
            type="text"
            id="tagline"
            placeholder="Your vibe in five words"
            class="w-full px-4 py-3 dark_background rounded-lg border border-zinc-700 text-white placeholder:text-zinc-400 placeholder:text-sm placeholder:italic focus:ring-2 focus:ring-blue-500 focus:outline-none"
            required
          />

          <label
            for="aboutSection"
            class="block text-sm mb-1 text-zinc-400 mt-4 md:mt-6"
            >About</label
          >

          <textarea
            id="aboutSection"
            placeholder="So, Who Are You Really?"
            rows="4"
            class="w-full px-4 py-3 dark_background rounded-lg border border-zinc-700 text-white placeholder:text-zinc-400 placeholder:text-sm placeholder:italic focus:ring-2 focus:ring-blue-500 focus:outline-none"
            required
          ></textarea>

          <!-- Profession & Hobby Selection -->
          <div class="mt-4 md:mt-6">
            <label
              for="professions"
              class="block text-sm font-medium text-zinc-400 mb-2"
            >
              Select Your Profession(s) or Hobby(s) (2–4 roles):
            </label>

            <div
              id="professions"
              class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3 text-sm text-zinc-200"
            >
              <!-- Static roles (same as yours)... -->
              <label class="flex role-label items-center">
                <input
                  type="checkbox"
                  class="profession text-blue-500"
                  id="developer"
                />
                <span>Developer</span>
              </label>

              <label class="flex role-label items-center">
                <input
                  type="checkbox"
                  class="profession text-blue-500"
                  id="designer"
                />
                <span>Designer</span>
              </label>

              <label class="flex role-label items-center">
                <input
                  type="checkbox"
                  class="profession text-blue-500"
                  id="writer"
                />
                <span>Writer</span>
              </label>

              <label class="flex role-label items-center">
                <input
                  type="checkbox"
                  class="profession text-blue-500"
                  id="photographer"
                />
                <span>Photographer</span>
              </label>

              <label class="flex role-label items-center">
                <input
                  type="checkbox"
                  class="profession text-blue-500"
                  id="musician"
                />
                <span>Musician</span>
              </label>

              <label class="flex role-label items-center">
                <input
                  type="checkbox"
                  class="profession text-blue-500"
                  id="editor"
                />
                <span>Editor</span>
              </label>

              <label class="flex role-label items-center">
                <input
                  type="checkbox"
                  class="profession text-blue-500"
                  id="videographer"
                />
                <span>Videographer</span>
              </label>

              <label class="flex role-label items-center">
                <input
                  type="checkbox"
                  class="profession text-blue-500"
                  id="illustrator"
                />
                <span>Illustrator</span>
              </label>

              <label class="flex role-label items-center">
                <input
                  type="checkbox"
                  class="profession text-blue-500"
                  id="animator"
                />
                <span>Animator</span>
              </label>

              <label class="flex role-label items-center">
                <input
                  type="checkbox"
                  class="profession text-blue-500"
                  id="content-creator"
                />
                <span>Content Creator</span>
              </label>

              <label class="flex role-label items-center">
                <input
                  type="checkbox"
                  class="profession text-blue-500"
                  id="artist"
                />
                <span>Artist</span>
              </label>

              <label class="flex role-label items-center">
                <input
                  type="checkbox"
                  class="profession text-blue-500"
                  id="coder"
                />
                <span>Coder</span>
              </label>

              <label class="flex role-label items-center">
                <input
                  type="checkbox"
                  class="profession text-blue-500"
                  id="youtuber"
                />
                <span>YouTuber</span>
              </label>

              <label class="flex role-label items-center">
                <input
                  type="checkbox"
                  class="profession text-blue-500"
                  id="traveler"
                />
                <span>Traveler</span>
              </label>

              <label class="flex role-label items-center">
                <input
                  type="checkbox"
                  class="profession text-blue-500"
                  id="teacher"
                />
                <span>Teacher</span>
              </label>

              <label class="flex role-label items-center">
                <input
                  type="checkbox"
                  class="profession text-blue-500"
                  id="student"
                />
                <span>Student</span>
              </label>
              <!-- Add others similarly -->
            </div>

            <span id="roleError" class="text-red-500 text-sm hidden">
              Please select between 2 and 4 roles.
            </span>

            <label for="otherCheckbox" class="role-label mt-3 w-full">
              <input type="checkbox" id="otherCheckbox" class="profession" />
              <span>Other:</span>

              <input
                type="text"
                id="otherProfession"
                class="other-input hidden"
                placeholder="Enter your custom role"
                disabled
              />

              <button
                id="addProfessionBtn"
                class="add-btn button_background hidden"
              >
                Add
              </button>
            </label>
          </div>

          <div>
            <label
              for="socialPlatform"
              class="block text-sm mb-1 text-zinc-400 mt-4 md:mt-6"
              >Add Your Social Media Links:</label
            >

            <div id="socialFields" class="space-y-4"></div>

            <div class="flex flex-col md:flex-row md:space-x-6">
              <div class="w-full md:w-1/3">
                <select
                  id="socialPlatform"
                  class="w-full px-4 py-3 dark_background rounded-lg border border-zinc-700 text-white placeholder:text-zinc-400 placeholder:text-sm placeholder:italic focus:ring-2 focus:ring-blue-500 focus:outline-none"
                  aria-label="Select Social Media Platform"
                >
                  <option value="icon_none">Select</option>
                  <option value="facebook">Facebook</option>
                  <option value="instagram">Instagram</option>
                  <option value="twitter">Twitter/X</option>
                  <option value="youtube">YouTube</option>
                  <option value="tiktok">TikTok</option>
                  <option value="linkedin">LinkedIn</option>
                  <option value="telegram">Telegram</option>
                  <option value="snapchat">Snapchat</option>
                  <option value="threads">Threads</option>
                  <option value="pinterest">Pinterest</option>
                  <option value="spotify">Spotify</option>
                  <option value="github">GitHub</option>
                  <option value="monkeytype">Monkeytype</option>
                </select>
              </div>

              <!-- Social Media URL Input and Add Button -->
              <div
                class="w-full md:w-2/3 flex items-center space-x-4 mt-4 md:mt-0"
              >
                <input
                  type="url"
                  id="socialURL"
                  placeholder="Where can we stalk your brilliance?"
                  class="w-full px-4 py-3 dark_background rounded-lg border border-zinc-700 text-white placeholder:text-zinc-400 placeholder:text-sm placeholder:italic focus:ring-2 focus:ring-blue-500 focus:outline-none"
                  aria-label="Enter your social media URL"
                />
                <button
                  type="button"
                  id="addSocialBtn"
                  class="button_background text-white px-6 py-3 rounded-lg"
                  aria-label="Add social media link"
                >
                  Add
                </button>
              </div>
            </div>
          </div>

          <label class="block text-sm mb-1 text-zinc-400 mt-4 md:mt-6"
            >Select a Preset Background</label
          >
          <div
            id="bgPalette"
            class="grid gap-2 grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 xl:grid-cols-8"
          >
            <!-- Background Option 0 -->
            <div class="bg-option flex flex-col items-center space-y-2">
              <img
                src="./Media/Background.webp"
                data-bg-color="#10121b"
                class="bg-thumb w-20 h-20 object-cover rounded-xl cursor-pointer border-2 border-transparent hover:scale-105 transition-all duration-200 ease-out"
              />
              <div class="palette flex space-x-1"></div>
            </div>

            <!-- Background Option 1 -->
            <div class="bg-option flex flex-col items-center space-y-2">
              <img
                src="./Media/1.webp"
                data-bg-color="#1b1210"
                class="bg-thumb w-20 h-20 object-cover rounded-xl cursor-pointer border-2 border-transparent hover:scale-105 transition-all duration-200 ease-out"
              />
              <div class="palette flex space-x-1"></div>
            </div>

            <!-- Background Option 2 -->
            <div class="bg-option flex flex-col items-center space-y-2">
              <img
                src="./Media/2.webp"
                data-bg-color="#121413"
                class="bg-thumb w-20 h-20 object-cover rounded-xl cursor-pointer border-2 border-transparent hover:scale-105 transition-all duration-200 ease-out"
              />
              <div class="palette flex space-x-1"></div>
            </div>

            <!-- Background Option 3 -->
            <div class="bg-option flex flex-col items-center space-y-2">
              <img
                src="./Media/3.webp"
                data-bg-color="#0c191c"
                class="bg-thumb w-20 h-20 object-cover rounded-xl cursor-pointer border-2 border-transparent hover:scale-105 transition-all duration-200 ease-out"
              />
              <div class="palette flex space-x-1"></div>
            </div>

            <!-- Background Option 4 -->
            <div class="bg-option flex flex-col items-center space-y-2">
              <img
                src="./Media/4.webp"
                data-bg-color="#1b101a"
                class="bg-thumb w-20 h-20 object-cover rounded-xl cursor-pointer border-2 border-transparent hover:scale-105 transition-all duration-200 ease-out"
              />
              <div class="palette flex space-x-1"></div>
            </div>

            <!-- Background Option 5 -->
            <div class="bg-option flex flex-col items-center space-y-2">
              <img
                src="./Media/5.webp"
                data-bg-color="#1f1a17"
                class="bg-thumb w-20 h-20 object-cover rounded-xl cursor-pointer border-2 border-transparent hover:scale-105 transition-all duration-200 ease-out"
              />
              <div class="palette flex space-x-1"></div>
            </div>

            <!-- Background Option 6 -->
            <div class="bg-option flex flex-col items-center space-y-2">
              <img
                src="./Media/6.webp"
                data-bg-color="#121115"
                class="bg-thumb w-20 h-20 object-cover rounded-xl cursor-pointer border-2 border-transparent hover:scale-105 transition-all duration-200 ease-out"
              />
              <div class="palette flex space-x-1"></div>
            </div>

            <!-- Background Option 7 -->
            <div class="bg-option flex flex-col items-center space-y-2">
              <img
                src="./Media/7.webp"
                data-bg-color="#1b1210"
                class="bg-thumb w-20 h-20 object-cover rounded-xl cursor-pointer border-2 border-transparent hover:scale-105 transition-all duration-200 ease-out"
              />
              <div class="palette flex space-x-1"></div>
            </div>

            <!-- Background Option 8 -->
            <div class="bg-option flex flex-col items-center space-y-2">
              <img
                src="./Media/8.webp"
                data-bg-color="#202425"
                class="bg-thumb w-20 h-20 object-cover rounded-xl cursor-pointer border-2 border-transparent hover:scale-105 transition-all duration-200 ease-out"
              />
              <div class="palette flex space-x-1"></div>
            </div>

            <!-- Background Option 9 -->
            <div class="bg-option flex flex-col items-center space-y-2">
              <img
                src="./Media/9.webp"
                data-bg-color="#0f1318"
                class="bg-thumb w-20 h-20 object-cover rounded-xl cursor-pointer border-2 border-transparent hover:scale-105 transition-all duration-200 ease-out"
              />
              <div class="palette flex space-x-1"></div>
            </div>

            <!-- Background Option 10 -->
            <div class="bg-option flex flex-col items-center space-y-2">
              <img
                src="./Media/Background-Dark.webp"
                data-bg-color="#0b0b0b"
                class="bg-thumb w-20 h-20 object-cover rounded-xl cursor-pointer border-2 border-transparent hover:scale-105 transition-all duration-200 ease-out"
              />
              <div class="palette flex space-x-1"></div>
            </div>

            <!-- Background Option 11 -->
            <div class="bg-option flex flex-col items-center space-y-2">
              <img
                src="./Media/Black-Background.webp"
                data-bg-color="#0b0b0b"
                class="bg-thumb w-20 h-20 object-cover rounded-xl cursor-pointer border-2 border-transparent hover:scale-105 transition-all duration-200 ease-out"
              />
              <div class="palette flex space-x-1"></div>
            </div>

            <!-- Background Option 12 -->
            <div class="bg-option flex flex-col items-center space-y-2">
              <img
                src="./Media/10.webp"
                data-bg-color="#3e2c23"
                class="bg-thumb w-20 h-20 object-cover rounded-xl cursor-pointer border-2 border-transparent hover:scale-105 transition-all duration-200 ease-out"
              />
              <div class="palette flex space-x-1"></div>
            </div>

            <!-- Background Option 12 -->
            <div class="bg-option flex flex-col items-center space-y-2">
              <img
                src="./Media/11.png"
                data-bg-color="#462929"
                class="bg-thumb w-20 h-20 object-cover rounded-xl cursor-pointer border-2 border-transparent hover:scale-105 transition-all duration-200 ease-out"
              />
              <div class="palette flex space-x-1"></div>
            </div>

            <!-- Background Option 13 -->
            <div class="bg-option flex flex-col items-center space-y-2">
              <img
                src="./Media/12.png"
                data-bg-color="#4d5b47"
                class="bg-thumb w-20 h-20 object-cover rounded-xl cursor-pointer border-2 border-transparent hover:scale-105 transition-all duration-200 ease-out"
              />
              <div class="palette flex space-x-1"></div>
            </div>

            <!-- Background Option 14 -->
            <div class="bg-option flex flex-col items-center space-y-2">
              <img
                src="./Media/13.png"
                data-bg-color="#0e0f0b"
                class="bg-thumb w-20 h-20 object-cover rounded-xl cursor-pointer border-2 border-transparent hover:scale-105 transition-all duration-200 ease-out"
              />
              <div class="palette flex space-x-1"></div>
            </div>

            <!-- Background Option 15 -->
            <div class="bg-option flex flex-col items-center space-y-2">
              <img
                src="./Media/14.jpg"
                data-bg-color="#0f0d0b"
                class="bg-thumb w-20 h-20 object-cover rounded-xl cursor-pointer border-2 border-transparent hover:scale-105 transition-all duration-200 ease-out"
              />
              <div class="palette flex space-x-1"></div>
            </div>

            <!-- Background Option 16 -->

            <div class="bg-option flex flex-col items-center space-y-2">
              <img
                src="./Media/15.jpg"
                data-bg-color="#0f0c0b"
                class="bg-thumb w-20 h-20 object-cover rounded-xl cursor-pointer border-2 border-transparent hover:scale-105 transition-all duration-200 ease-out"
              />
              <div class="palette flex space-x-1"></div>
            </div>

            <div class="bg-option flex flex-col items-center space-y-2">
              <img
                src="./Media/16.jpg"
                data-bg-color="#0b0c0f"
                class="bg-thumb w-20 h-20 object-cover rounded-xl cursor-pointer border-2 border-transparent hover:scale-105 transition-all duration-200 ease-out"
              />
              <div class="palette flex space-x-1"></div>
            </div>

            <div class="bg-option flex flex-col items-center space-y-2">
              <img
                src="./Media/17.jpg"
                data-bg-color="#0f0d0b"
                class="bg-thumb w-20 h-20 object-cover rounded-xl cursor-pointer border-2 border-transparent hover:scale-105 transition-all duration-200 ease-out"
              />
              <div class="palette flex space-x-1"></div>
            </div>

            <div class="bg-option flex flex-col items-center space-y-2">
              <img
                src="./Media/18.png"
                data-bg-color="#0b0f0f"
                class="bg-thumb w-20 h-20 object-cover rounded-xl cursor-pointer border-2 border-transparent hover:scale-105 transition-all duration-200 ease-out"
              />
              <div class="palette flex space-x-1"></div>
            </div>

            <div class="bg-option flex flex-col items-center space-y-2">
              <img
                src="./Media/19.jpg"
                data-bg-color="#0f0d0b"
                class="bg-thumb w-20 h-20 object-cover rounded-xl cursor-pointer border-2 border-transparent hover:scale-105 transition-all duration-200 ease-out"
              />
              <div class="palette flex space-x-1"></div>
            </div>

            <div class="bg-option flex flex-col items-center space-y-2">
              <img
                src="./Media/20.jpg"
                data-bg-color="#0b0d0b"
                class="bg-thumb w-20 h-20 object-cover rounded-xl cursor-pointer border-2 border-transparent hover:scale-105 transition-all duration-200 ease-out"
              />
              <div class="palette flex space-x-1"></div>
            </div>

            <div class="bg-option flex flex-col items-center space-y-2">
              <img
                src="./Media/26.png"
                data-bg-color="#04090c"
                class="bg-thumb w-20 h-20 object-cover rounded-xl cursor-pointer border-2 border-transparent hover:scale-105 transition-all duration-200 ease-out"
              />
              <div class="palette flex space-x-1"></div>
            </div>

            <div class="bg-option flex flex-col items-center space-y-2">
              <img
                src="./Media/27.jpg"
                data-bg-color="#0d0f0c"
                class="bg-thumb w-20 h-20 object-cover rounded-xl cursor-pointer border-2 border-transparent hover:scale-105 transition-all duration-200 ease-out"
              />
              <div class="palette flex space-x-1"></div>
            </div>

            <div class="bg-option flex flex-col items-center space-y-2">
              <img
                src="./Media/28.jpg"
                data-bg-color="#0c0804"
                class="bg-thumb w-20 h-20 object-cover rounded-xl cursor-pointer border-2 border-transparent hover:scale-105 transition-all duration-200 ease-out"
              />
              <div class="palette flex space-x-1"></div>
            </div>

            <div class="bg-option flex flex-col items-center space-y-2">
              <img
                src="./Media/29.jpg"
                data-bg-color="#070606"
                class="bg-thumb w-20 h-20 object-cover rounded-xl cursor-pointer border-2 border-transparent hover:scale-105 transition-all duration-200 ease-out"
              />
              <div class="palette flex space-x-1"></div>
            </div>
          </div>

          <label
            for="titleFont"
            class="block text-sm mb-1 text-zinc-400 mt-4 md:mt-6"
            >Title Font:</label
          >
          <select
            id="titleFont"
            class="w-200 px-4 py-3 dark_background rounded-lg border border-zinc-700 text-white placeholder:text-zinc-400 placeholder:text-sm placeholder:italic focus:ring-2 focus:ring-blue-500 focus:outline-none"
          >
            <option value="'Bethasia">Bethasia (Recommended)</option>
            <option value="'Dream Avenue">Dream Avenue</option>
            <option value="'Apricot">Apricot</option>
            <option value="'TanBuster">Tan Buster</option>
            <option value="'Harry Potter">Harry Potter</option>
          </select>

          <p
            id="fontPreview"
            class="mt-4 text-white text-xl transition-all duration-300"
          >
            This is a font preview.
          </p>

          <label
            for="faviconFile"
            class="block text-sm mb-1 text-zinc-400 mt-4 md:mt-6"
          >
            Upload Favicon (Website Logo):
          </label>

          <div class="relative">
            <input
              type="file"
              id="faviconFile"
              accept="image/png, image/jpeg"
              onchange="handleFaviconChange(event)"
              class="hidden"
              aria-describedby="faviconHelp"
              aria-label="Choose an image file to upload as a favicon"
            />
            <button
              type="button"
              class="w-250 py-2 px-4 text-sm font-medium dark_background border border-zinc-700 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 cursor-pointer transition-colors"
              onclick="document.getElementById('faviconFile').click()"
            >
              Choose Favicon
            </button>
          </div>

          <div id="faviconFields" class="mt-2"></div>

          <label
            for="loaderOption"
            class="block text-sm font-medium text-zinc-400 mt-6"
          >
            Select Loader:
          </label>
          <div class="flex items-center gap-6 mt-4">
            <label
              class="flex items-center gap-2 cursor-pointer text-sm text-zinc-300"
            >
              <input
                type="radio"
                name="loaderOption"
                value="with"
                checked
                class="accent-zinc-500"
              />
              <span
                >With Loader
                <span class="text-zinc-500">(Recommended)</span></span
              >
            </label>
            <label
              class="flex items-center gap-2 cursor-pointer text-sm text-zinc-300"
            >
              <input
                type="radio"
                name="loaderOption"
                value="without"
                class="accent-zinc-500"
              />
              <span>Without Loader</span>
            </label>
          </div>

          <label
            for="faviconFile"
            class="block text-sm mb-1 text-zinc-400 mt-4 md:mt-6"
            >Preview:</label
          >
          <div
            class="browser-window"
            role="main"
            aria-label="Simulated Browser Window"
          >
            <div class="title-bar">
              <div class="title-buttons">
                <div class="close-button"></div>
                <div class="minimize-button"></div>
                <div class="maximize-button"></div>
              </div>

              <div class="title-text">
                <img
                  src="#faviconurl"
                  alt="Favicon"
                  class="favicon"
                  id="faviconPreview"
                />

                <div class="text_url" id="text_url_bar"></div>
              </div>
            </div>

            <div class="address-bar" role="search">
              <div class="nav-buttons">
                <button class="nav-button" aria-label="Back">
                  <svg
                    width="18"
                    height="18"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  >
                    <path d="M15 18l-6-6 6-6" />
                  </svg>
                </button>
                <button class="nav-button" aria-label="Forward">
                  <svg
                    width="18"
                    height="18"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  >
                    <path d="M9 18l6-6-6-6" />
                  </svg>
                </button>
                <button class="nav-button" aria-label="Reload">
                  <svg
                    width="18"
                    height="18"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  >
                    <polyline points="23 4 23 10 17 10" />
                    <polyline points="1 20 1 14 7 14" />
                    <path
                      d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"
                    />
                  </svg>
                </button>
              </div>
              <div class="input-wrapper">
                <div class="secure-icon">
                  <svg
                    width="18"
                    height="18"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="#81c784"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  >
                    <rect x="3" y="11" width="18" height="11" rx="2" ry="2" />
                    <path d="M7 11V7a5 5 0 0 1 10 0v4" />
                  </svg>
                </div>
                <input
                  type="text"
                  class="url-input"
                  id="url_bar"
                  placeholder="Your website"
                  aria-label="Address bar"
                  readonly
                />
              </div>
            </div>
            <div class="content-area"></div>
          </div>

          <button
            type="submit"
            id="submitBtn"
            class="button_background text-white px-6 py-3 rounded-lg mt-4 md:mt-6 flex items-center justify-center"
          >
            <span id="btnText">Generate My Site</span>
            <div id="loader_site" class="ml-2"></div>
          </button>
        </form>
      </section>

      <section id="whatnext" class="px-6 py-24 max-w-3xl mx-auto text-center">
        <h3 class="text-4xl sm:text-5xl md:text-6xl font-bold mb-6">
          What’s Next?
        </h3>
        <p class="text-zinc-400 text-base md:text-lg leading-relaxed mb-8">
          You’ve successfully generated your portfolio — great job! Now let’s
          bring it to life.
        </p>

        <div
          class="text-left space-y-6 text-zinc-400 text-base md:text-lg leading-relaxed md:leading-loose"
        >
          <div>
            <strong class="text-white">1. Unzip the Downloaded Folder</strong
            ><br />
            Locate the downloaded <code>.zip</code> file on your computer and
            extract it.
          </div>

          <div>
            <strong class="text-white">2. View Your Portfolio Locally</strong
            ><br />
            Open the unzipped folder and double-click the
            <code>index.html</code> file. It will open in your default web
            browser — that’s your live portfolio!
          </div>

          <!-- <div>
            <strong class="text-white"
              >Want to Publish It Online for Free?</strong
            ><br />
            You can host your portfolio using
            <a
              href="https://pages.github.com"
              target="_blank"
              class="underline hover:text-white"
              >GitHub Pages</a
            >. Here’s how:
          </div> -->
        </div>
      </section>

      <section
        id="message_for_you"
        class="px-6 py-24 max-w-3xl mx-auto text-center"
      >
        <h3
          class="text-4xl sm:text-5xl md:text-6xl lg:text-7xl font-bold mb-2 sm:mb-4"
        >
          A Gentle Message Just for You!
        </h3>
        <p class="dim_text mb-8 text-base">
          Because your heart deserves a smile today.
        </p>
        <p
          class="text-zinc-400 text-base md:text-lg leading-relaxed md:leading-loose"
        >
          Hey there,
        </p>

        <p
          class="text-zinc-400 text-base md:text-lg leading-relaxed md:leading-loose mt-2 md:mt-3"
        >
          Thank you for stopping by. Whether you arrived here by chance,
          curiosity, or intention—I’m truly glad you did.
        </p>

        <p
          class="text-zinc-400 text-base md:text-lg leading-relaxed md:leading-loose mt-2 md:mt-3"
        >
          This space is more than just a portfolio; it’s a quiet little corner
          of the internet where I’ve poured fragments of my heart, passion, and
          creativity. Every design, every line of code, every word is stitched
          with midnight hustle, quiet hope, an unspoken love for the art of
          building something meaningful and my belief in the beauty of
          simplicity, purpose, and human connection.
        </p>

        <p
          class="text-zinc-400 text-base md:text-lg leading-relaxed md:leading-loose mt-2 md:mt-3"
        >
          If you’re walking through storms, chasing something invisible, or
          simply wondering if your spark matters—let me remind you: it does. You
          do.
        </p>

        <p
          class="text-zinc-400 text-base md:text-lg leading-relaxed md:leading-loose mt-2 md:mt-3"
        >
          With love and quiet awe,
        </p>
        <div>
          <div class="sign">Kartikeya</div>
        </div>
      </section>

      <footer
        id="footer"
        class="relative w-full bg-black bg-opacity-90 text-white footer-section"
      >
        <div class="space_height_bottom"></div>
        <div class="transparent_overlay_bottom"></div>
        <div class="w-full border-b border-zinc-700"></div>

        <div
          class="flex flex-col md:flex-row justify-between gap-12 px-6 md:px-16 py-12"
        >
          <div class="w-full md:w-1/2">
            <h2
              class="text-3xl md:text-4xl lg:text-5xl font-semibold tracking-normal"
            >
              About Me
            </h2>
            <p class="text-zinc-400 text-base md:text-lg leading-snug mt-4">
              I’m Kartikeya, a programmer and typist, skilled in front-end
              development (HTML, CSS, JavaScript, React) and Python. I also have
              experience in C and video editing
            </p>
          </div>

          <div class="w-full md:w-1/2">
            <h2
              class="text-3xl md:text-4xl lg:text-5xl font-semibold tracking-normal"
            >
              Wanna talk?
            </h2>
            <p class="text-zinc-400 text-base md:text-lg leading-snug mt-4">
              Let’s connect and create something amazing together. Feel free to
              reach out to me here
              <a href="#contact" class="underline">contact</a>. I’m open to new
              ideas and collaborations. Let’s create!
            </p>
          </div>
        </div>

        <div
          class="text-center py-6 text-zinc-400 text-sm border-t border-zinc-700"
        >
          © <span id="year"></span> Kartikeya. All rights reserved.
        </div>
      </footer>
    </div>

    <!-- Image Preview Modal (Below 80px Navbar) -->
    <div
      id="imageModal"
      class="fixed top-[80px] bottom-0 left-0 right-0 bg-black bg-opacity-60 backdrop-blur-sm flex items-center justify-center hidden z-40"
    >
      <div
        id="modalContent"
        class="relative transform scale-90 opacity-0 transition-all duration-300 ease-out"
      >
        <img
          id="modalImage"
          src=""
          class="max-w-[90vw] max-h-[75vh] rounded-2xl shadow-2xl border border-white/10"
        />

        <!-- Close Button -->
        <button
          onclick="closeModal()"
          class="absolute top-2 right-2 bg-white/10 hover:bg-white/20 text-white rounded-full p-1.5 transition-all duration-200"
          title="Close"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="w-5 h-5"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M6 18L18 6M6 6l12 12"
            />
          </svg>
        </button>
      </div>
    </div>

    <script>
      const modal = document.getElementById("imageModal");
      const modalImg = document.getElementById("modalImage");
      const modalContent = document.getElementById("modalContent");

      document.querySelectorAll(".bg-thumb").forEach((img) => {
        img.addEventListener("click", () => {
          modalImg.src = img.src;
          modal.classList.remove("hidden");
          setTimeout(() => {
            modalContent.classList.remove("scale-90", "opacity-0");
            modalContent.classList.add("scale-100", "opacity-100");
          }, 10);
        });
      });

      function closeModal() {
        modalContent.classList.remove("scale-100", "opacity-100");
        modalContent.classList.add("scale-90", "opacity-0");
        setTimeout(() => modal.classList.add("hidden"), 300);
      }

      modal.addEventListener("click", (e) => {
        if (e.target.id === "imageModal") closeModal();
      });

      const zip = new JSZip();
      let faviconBlob = null;

      async function handleFaviconChange(event) {
        const faviconFile = event.target.files[0];
        if (!faviconFile) return alert("Please select a favicon image file.");

        const reader = new FileReader();
        reader.onload = (e) => {
          const img = new Image();
          img.onload = async () => {
            const size = Math.min(img.width, img.height);
            const canvas = document.createElement("canvas");
            canvas.width = size;
            canvas.height = size;
            const ctx = canvas.getContext("2d");

            ctx.beginPath();
            ctx.arc(size / 2, size / 2, size / 2, 0, Math.PI * 2);
            ctx.closePath();
            ctx.clip();
            ctx.drawImage(
              img,
              (img.width - size) / 2,
              (img.height - size) / 2,
              size,
              size,
              0,
              0,
              size,
              size
            );

            const croppedDataURL = canvas.toDataURL("image/png");
            faviconBlob = await (await fetch(croppedDataURL)).blob();

            let faviconTag = document.querySelector("link[rel~='icon']");
            if (!faviconTag) {
              faviconTag = document.createElement("link");
              faviconTag.rel = "icon";
              document.head.appendChild(faviconTag);
            }
            faviconTag.href = croppedDataURL;

            const preview = document.getElementById("faviconPreview");
            if (preview) {
              preview.src = croppedDataURL;
              preview.style.display = "block";
            }
          };
          img.onerror = () => alert("Invalid image file.");
          img.src = e.target.result;
        };
        reader.readAsDataURL(faviconFile);
      }

      function extractPalette(img, container) {
        const canvas = document.createElement("canvas");
        const ctx = canvas.getContext("2d");
        if (!img.naturalWidth || !img.naturalHeight) return;

        canvas.width = img.naturalWidth;
        canvas.height = img.naturalHeight;
        ctx.drawImage(img, 0, 0);

        const data = ctx.getImageData(0, 0, canvas.width, canvas.height).data;
        const colors = {};

        for (let i = 0; i < data.length; i += 4) {
          const r = Math.round(data[i] / 32) * 32;
          const g = Math.round(data[i + 1] / 32) * 32;
          const b = Math.round(data[i + 2] / 32) * 32;
          const key = `${r},${g},${b}`;
          colors[key] = (colors[key] || 0) + 1;
        }

        const topColors = Object.entries(colors)
          .sort((a, b) => b[1] - a[1])
          .slice(0, 3)
          .map(([key]) => `rgb(${key})`);

        container.innerHTML = "";
        topColors.forEach((color) => {
          const swatch = document.createElement("div");
          swatch.className = "w-4 h-4 rounded shadow";
          swatch.style.backgroundColor = color;
          container.appendChild(swatch);
        });
      }

      function safeExtractPalette(img, container, attempt = 0) {
        if (img.naturalWidth === 0 && attempt < 5) {
          setTimeout(
            () => safeExtractPalette(img, container, attempt + 1),
            100
          );
        } else {
          extractPalette(img, container);
        }
      }

      function setupNav() {
        document.querySelectorAll(".nav-link").forEach((link) => {
          link.addEventListener("click", () => {
            const menu = document.getElementById("menu-btn");
            if (menu) menu.checked = false;
          });
        });
      }

      document.addEventListener("DOMContentLoaded", () => {
        setupNav();
        document.getElementById("year").textContent = new Date().getFullYear();

        document.querySelectorAll(".bg-option").forEach((option) => {
          const img = option.querySelector("img");
          const palette = option.querySelector(".palette");

          const generate = () => safeExtractPalette(img, palette);
          if (img.complete) {
            img.decode().then(generate).catch(generate);
          } else {
            img.onload = () => img.decode().then(generate).catch(generate);
          }
        });
      });

      window.addEventListener("load", () => {
        requestAnimationFrame(() => {
          setTimeout(() => {
            const loadingCircle = document.getElementById("loading-circle");
            const content = document.querySelector(
              ".container_universal_hidden"
            );
            if (loadingCircle) loadingCircle.classList.add("hidden");
            if (content) content.classList.add("show");
          }, 200);
        });
      });
    </script>

    <script>
      const container = document.getElementById("professions");
      const roleError = document.getElementById("roleError");
      const otherCheckbox = document.getElementById("otherCheckbox");
      const otherProfession = document.getElementById("otherProfession");
      const addButton = document.getElementById("addProfessionBtn");

      let userInteracted = false;

      const getProfessionCheckboxes = () =>
        Array.from(document.querySelectorAll(".profession")).filter(
          (cb) => cb.id !== "otherCheckbox"
        );

      const getSelectedCount = () =>
        getProfessionCheckboxes().filter((cb) => cb.checked).length;

      const showError = (message) => {
        roleError.textContent = message;
        roleError.classList.remove("hidden");
      };

      const clearError = () => {
        roleError.textContent = "";
        roleError.classList.add("hidden");
      };

      const validateSelection = () => {
        if (!userInteracted) return;

        const count = getSelectedCount();
        if (count < 2) {
          showError("Please select at least 2 roles.");
        } else if (count > 4) {
          showError("You can select a maximum of 4 roles.");
        } else {
          clearError();
        }
      };

      const handleCheckboxChange = (e) => {
        userInteracted = true;

        const selected = getSelectedCount();
        if (selected > 4) {
          e.target.checked = false;
        }

        validateSelection();
      };

      container.addEventListener("change", (e) => {
        if (
          e.target.classList.contains("profession") &&
          e.target.id !== "otherCheckbox"
        ) {
          handleCheckboxChange(e);
        }
      });

      otherCheckbox.addEventListener("change", () => {
        const checked = otherCheckbox.checked;
        otherProfession.classList.toggle("hidden", !checked);
        addButton.classList.toggle("hidden", !checked);
        otherProfession.disabled = !checked;

        if (!checked) {
          otherProfession.value = "";
          container
            .querySelectorAll("label[data-custom]")
            .forEach((label) => label.remove());
          validateSelection();
        }
      });

      otherProfession.addEventListener("keydown", (e) => {
        if (e.key === "Enter") {
          e.preventDefault();
          addCustomRole();
        }
      });

      if (addButton) {
        addButton.addEventListener("click", (e) => {
          e.preventDefault();
          addCustomRole();
        });
      }

      function addCustomRole() {
        const val = otherProfession.value.trim();
        if (!val) return;

        userInteracted = true;

        const exists = [...container.querySelectorAll("label span")].some(
          (el) => el.textContent.trim().toLowerCase() === val.toLowerCase()
        );
        if (exists) {
          showError("This role already exists.");
          return;
        }

        if (getSelectedCount() >= 4) {
          showError("You can select a maximum of 4 roles.");
          return;
        }

        const id = `custom-${Date.now()}`;
        const label = document.createElement("label");
        label.className = "flex role-label items-center";
        label.setAttribute("data-custom", "true");

        const input = document.createElement("input");
        input.type = "checkbox";
        input.id = id;
        input.className = "profession text-blue-500";
        input.checked = true;

        input.addEventListener("change", handleCheckboxChange);

        const span = document.createElement("span");
        span.textContent = val;

        label.appendChild(input);
        label.appendChild(span);
        container.appendChild(label);

        otherProfession.value = "";
        validateSelection();
      }

      // Init
      clearError();
      otherProfession.classList.add("hidden");
      addButton.classList.add("hidden");
      otherProfession.disabled = true;

      const fontSelect = document.getElementById("titleFont");
      const preview = document.getElementById("fontPreview");

      function updateFont() {
        let rawValue = fontSelect.value.trim().replace(/^['"]+|['"]+$/g, "");
        const fontName = rawValue;

        // Fade out
        preview.style.opacity = 0;

        // Wait for fade out, then change font and fade in
        setTimeout(() => {
          preview.style.fontFamily = `'${fontName}'`;
          preview.style.opacity = 1;
        }, 150);
      }

      fontSelect.addEventListener("change", updateFont);
      window.addEventListener("DOMContentLoaded", updateFont);
    </script>
  </body>
</html>
